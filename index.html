<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ディープリンクテスト</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <meta name="apple-itunes-app" content="app-id=930815049">
  <link rel="manifest" href="manifest.json">


  <!-- twitter card -->
  <meta name="twitter:card" content="app">
  <meta name="twitter:description" content="ABCアプリ">
  <meta name="twitter:app:country" content="JP">
  <meta name="twitter:app:name:iphone" content="ABC App">
  <meta name="twitter:app:id:iphone" content="930815049">
  <meta name="twitter:app:url:iphone" content="jp.co.asahi.PortalApps://">
  <meta name="twitter:app:name:ipad" content="ABC App">
  <meta name="twitter:app:id:ipad" content="930815049">
  <meta name="twitter:app:url:ipad" content="jp.co.asahi.PortalApps://">
  <meta name="twitter:app:name:googleplay" content="ABC App">
  <meta name="twitter:app:id:googleplay" content="jp.co.asahi.abcapp">
  <!--  <meta name="twitter:app:url:googleplay" content="http://example.com/action/5149e249222f9e600a7540ef">-->

  <!-- facebook applinks -->
  <meta property="al:ios:url" content="jp.co.asahi.PortalApps://" />
  <meta property="al:ios:app_store_id" content="930815049" />
  <meta property="al:ios:app_name" content="ABC App" />
  <meta property="al:android:url" content="jp.co.asahi.PortalApps://" />
  <meta property="al:android:app_name" content="ABC App" />
  <meta property="al:android:package" content="jp.co.asahi.abcapp" />
  <!--
<meta property="al:web:url"
content="http://applinks.org/documentation" />
-->
  
<!--
  <script>
    var _ua = (function(u){
      return {
        Tablet:(u.indexOf("windows") != -1 && u.indexOf("touch") != -1 && u.indexOf("tablet pc") == -1) 
        || u.indexOf("ipad") != -1
        || (u.indexOf("android") != -1 && u.indexOf("mobile") == -1)
        || (u.indexOf("firefox") != -1 && u.indexOf("tablet") != -1)
        || u.indexOf("kindle") != -1
        || u.indexOf("silk") != -1
        || u.indexOf("playbook") != -1,
        Mobile:(u.indexOf("windows") != -1 && u.indexOf("phone") != -1)
        || u.indexOf("iphone") != -1
        || u.indexOf("ipod") != -1
        || (u.indexOf("android") != -1 && u.indexOf("mobile") != -1)
        || (u.indexOf("firefox") != -1 && u.indexOf("mobile") != -1)
        || u.indexOf("blackberry") != -1
      }
    })(window.navigator.userAgent.toLowerCase());


    if(_ua.Tablet){   //タブレット端末の時
      alert('タブレット')
    }else{
      if (navigator.userAgent.search('iPhone') !== -1) {
        
//        window.location.href="jp.co.asahi.PortalApps://";
        
      }else if(navigator.userAgent.search('android') !== -1){
        
      }
    }
    
  </script>
-->
  
  
  <script>
    // アプリを開く。アプリがインストールされていなければサイトを開く。
    function launchApp() {
      var IOS_SCHEME = 'jp.co.asahi.PortalApps';
      var IOS_STORE = 'https://itunes.apple.com/jp/app/abcapuri/id930815049?mt=8';
      var ANDROID_SCHEME = 'AndroidのURLスキームをここに入れるべし！';
      var ANDROID_PACKAGE = 'jp.co.asahi.abcapp';
      var PC_SITE = 'http://www.asahi.co.jp/smp/abcapp/'

      var userAgent = navigator.userAgent.toLowerCase();
      // iPhone端末ならアプリを開くかApp Storeを開く。
      if (userAgent.search(/iphone|ipad|ipod/) > -1) {
        launch_frame.location.href = IOS_SCHEME + '://';
        setTimeout(function() {
          location.href = IOS_STORE;
        }, 500);
      }
      // Android端末ならアプリを開くかGoogle Playを開く。
      else if (userAgent.search(/android/) > -1) {
        document.location = 'intent://#Intent;scheme=' + ANDROID_SCHEME
          + ';package=' + ANDROID_PACKAGE + ';end';
      }
      // その他・不明・PCなどの場合はサイトを開く。
      else {
        document.location = PC_SITE;
      }
    }

    // ページ読み込み時に実行
//    window.onload = function() {
//      launchApp();
//    }
  </script>
  
  
  </head>
<body>
  ディープリンクテスト<br>
  <br>
  <a href="jp.co.asahi.PortalApps://">アプリを開く(ios)</a><br>
  <a href="jp.co.asahi.PortalApps://">アプリを開く(android)</a><br>
  <br>
  <a href="#" onclick="launchApp()">アプリを開く</a><br>
  
  <div style="width: 0; height: 0; overflow: hidden;">
    <iframe id="launch_frame" name="launch_frame"> </iframe>
  </div>
</body>
</html>
